<div class="home-header">
  <header class="header">
      <h2 class="typo__bold typo__large">Home</h2>
  </header>
</div>
<div class="content">
  <% if current_user %>
    <%= render 'form' %>
  <% end %>
  <% @tweets.each do |tweet| %>
    <div class="tweet__container">
      <div class="tweet__image">
        <%= image_tag 'default.png', class:'image__circle image__small' %>
      </div>
      <div class="tweet__content">
        <div class="tweet__head">
          <div class="typo__medium typo__bold color-main"><%= tweet.user.name %></div>
          <div class="typo__medium typo__regular color-alter">@<%= tweet.user.username %></div>
          <div class="typo__small typo__regular color-alter"><%= tweet.user.created_at %></div>
        </div>
        <%= link_to tweet_path(tweet) do %>
          <p><%= tweet.body %></p>
          <div class="tweet__icons">
            <div class="tweet__icons-right">
              <%= image_tag 'retweet.svg' %>
              <span><%= tweet.replies.size %></span>
        <% end %>
              <% if current_user %>
                <% pre_like = tweet.likes.find { |like| like.user_id == current_user.id} %> 
              <% end %>
              <% if pre_like %>
                <%= button_to tweet_like_path(tweet, pre_like), method: :delete do %>
                  <%= image_tag 'like.svg' %>
                <% end %>
              <% else %>
                <%= button_to tweet_likes_path(tweet), method: :post do %>
                  <%= image_tag 'like.svg' %>
                <% end %>
              <% end %>
             
              <p><%= tweet.likes.count %> </p>
            </div>
        
          <% if current_user %>
            <div class="tweet__icons-left">
              <%= link_to edit_tweet_path(tweet) do%>
                <%= image_tag 'edit.svg' %>
              <% end %>
              <%= link_to tweet_path(tweet), method: :delete, data: { confirm: "Are you sure you want to delete this tweet?" } do %>
                <%= image_tag 'delete.svg' %>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>
